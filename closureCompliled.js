var a=1E3,b=0,c=Math.round(a/2),d=Math.round(a/2),e=1E4,f="RRLLLRLLLRRR",g=!0;l();var m=document.getElementById("rules");m.addEventListener("change",function(){f=m.value;l();c=Math.round(a/2);d=Math.round(a/2);b=0;n.fillStyle="blue";n.fillRect(0,0,p.width,p.height)});var q=document.getElementById("dimension");q.addEventListener("change",function(){a=q.value;p.width=a;p.height=a;n.fillStyle="blue";n.fillRect(0,0,p.width,p.height);c=Math.round(a/2);d=Math.round(a/2);b=0});var r=document.getElementById("fade");
r.addEventListener("change",function(){g="yes"==r.value?!0:!1});var t=document.getElementById("steps");t.addEventListener("change",function(){e=t.value});var p=document.getElementById("myCanvas");p.width=a;p.height=a;var n=p.getContext("2d",{alpha:!1,willReadFrequently:!0});n.fillStyle="blue";n.fillRect(0,0,p.width,p.height);function l(){f=f.split("");for(var h=0;h<f.length;h++)"L"==f[h]?f[h]=-1:"R"==f[h]&&(f[h]=1)}
function u(){for(var h=n.getImageData(0,0,a,a),k=h.data,v=0;v<e;v++)b+=f[k[4*c+d*a*4]],k[4*c+d*a*4]+=1,k[4*c+d*a*4]==f.length&&(k[4*c+d*a*4]=0),k[4*c+d*a*4+1]=255*k[4*c+d*a*4]/(f.length-1),k[4*c+d*a*4+2]=255*k[4*c+d*a*4]/(f.length-1),3<b?b=0:0>b&&(b=3),0==b?(--c,0>c&&(c=a-1)):1==b?(--d,0>d&&(d=a-1)):2==b?(c+=1,c==a&&(c=0)):3==b&&(d+=1,d==a&&(d=0));n.putImageData(h,0,0);g&&(n.fillStyle="rgba(0,0,225,0.01)",n.fillRect(0,0,a,a));requestAnimationFrame(u)}u();